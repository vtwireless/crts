<!DOCTYPE html>
<html lang=en>
<head>
    <meta charset="utf-8"/>
    <script src="/load.js"></script>
    <script>
    require('/hlsi.css');
    require('/slider.js');
    require('/label.js');
    require('/scrollPlot.js');
    onload = function() {
        Session(function(io) {

            // If we have permission, this will start this program only if
            // a program with the name '/throttle' is not running already.
            io.Emit('launch', '/throttle'/*path*/,
                []/*args array*/, '/throttle'/*program Name*/);

            var controllers = Controllers(io);

            // Parameters we will get, or set and get.
            var period1 = controllers.Parameter('/throttle'/*program*/,
                    'throttle'/*filter*/, 'period'/*parameter*/);
            var period2 = controllers.Parameter('/throttle'/*program*/,
                    'secondThrottle'/*filter*/, 'period'/*parameter*/);
            var bytes = controllers.Parameter('/throttle',
                    'secondThrottle', 'totalBytesOut');


            Slider(period2, {suffix: " sec", prefix: "period2"});
            // Test building slider from querySelector
            Slider(period1, { parentNode: "#slider1", suffix: " seconds"});

            Label(bytes, { prefix: 'Total Bytes', suffix: 'bytes',
                digits: 0 });
            Label(bytes, { prefix: 'Total Bytes ', suffix: ' kbytes',
                scale: 1.0/1024.0, digits: 1 });
            Label(bytes, { prefix: 'Total Bytes ', suffix: ' Mbytes',
                scale: 1.0e-6, digits: 1 });


            ScrollPlot(period1);
            ScrollPlot(period2, { yTicks: [ 0.0, 0.2, 0.4, 0.6, 0.8, 1.0 ]});

            ScrollPlot(period2, { 
                        yLog: true,
                        yTicks: [ 0.2, 0.4, 0.6, 0.8, 1.0 ],
                        yMin: 0.01,
                        yMax: 2.0,
                        yLabel: "bytes"
            });





        }, { 
            showHeader: true,
            loadCRTScss: false
        });
    };
    </script>
    <title>CRTS</title>
</head>
<body>

    <h4><a href=".">up</a></h4>

    <div id=slider1></div>

</body>
</html>
