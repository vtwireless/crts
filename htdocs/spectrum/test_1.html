<!DOCTYPE html>
<html lang=en>
<head>
    <meta charset="utf-8"/>

    <style type="text/css">
body {
    background-color:#C0D0E0;
    padding: 40px;
}
canvas.clock {
    background-color: #B6ECDC;
    width: 100%;
    height: 100%;
    padding: 0px;
    margin: 0px;
}
    </style>

    <script src='/load.js'></script>

    <script>

// Note: In order to keep webDesktop and scope usable by other software
// projects we cannot use require() in them so we must put a longer list
// of dependences in this CRTS specific code.

require('/spectrum/spectrum.js');
require('/webDesktop/webDesktop.css');
require('/webDesktop/webDesktop.js');
require('/webDesktop/clock.js');

onload = function() {

    var clock = new Clock;
    new WDApp('Clock', clock.getElement());
    clock.run();

    function SpectrumDisplay(desc, onclose_in = null) {

        var onclose = onclose_in;

        var scope = new Scope;

        var app = new WDApp('Spectrum ' + desc,
                scope.getElement(), function() {
            console.log('Removing spectrum scope: ' + desc);
            if(onclose) onclose();
            app = null;
        });

        this.destroy = function() {
            if(app) app.close();
            app = null;
        };
        this.draw = scope.draw;
    }

    createSession(function(io) {

        //createSpectrumFeeds(io);

        createSpectrumFeeds(io, SpectrumDisplay);
    });
};
    </script>


    <title>CRTS</title>
</head>
<body>

    <h1>Spectrum Feed Test</h1>

    <p><a href=".">Back to index</a></p>

</body>
</html>
